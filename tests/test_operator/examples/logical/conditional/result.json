{
  "globals": {
    "scope": {
      "value": "resourceGroup"
    }
  },
  "variables": {
    "subnetId": {
      "value": {
        "operator": {
          "type": "conditional",
          "operands": {
            "condition": "createNewVnet",
            "true_value": "subnet.id",
            "false_value": {
              "function": {
                "type": "resource_id",
                "parameters": {
                  "resource_type": "'Microsoft.Network/virtualNetworks/subnets'",
                  "resource_name_1": "vnetName",
                  "resource_name_2": "subnetName",
                  "resource_group_name": "vnetResourceGroupName",
                  "subscription_id": null
                }
              }
            }
          }
        }
      }
    }
  },
  "resources": {
    "managementGroup": {
      "decorators": [],
      "type": "Microsoft.Management/managementGroups",
      "api_version": "2020-05-01",
      "config": {
        "name": "managementGroupId",
        "properties": {
          "displayName": "managementGroupDisplayName",
          "details": {
            "parent": {
              "id": {
                "operator": {
                  "type": "conditional",
                  "operands": {
                    "condition": {
                      "function": {
                        "type": "empty",
                        "parameters": {
                          "item_to_test": "parentManagementGroupId"
                        }
                      }
                    },
                    "true_value": "'/providers/Microsoft.Management/managementGroups/${parentManagementGroupId}'",
                    "false_value": null
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "outputs": {
    "endpoint": {
      "type": "string",
      "value": {
        "operator": {
          "type": "conditional",
          "operands": {
            "condition": "deployStorage",
            "true_value": "myStorageAccount.properties.primaryEndpoints.blob",
            "false_value": "''"
          }
        }
      }
    }
  }
}
