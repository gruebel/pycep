{
  "globals": {
    "scope": {
      "value": "resourceGroup"
    }
  },
  "variables": {
    "kvName": {
      "decorators": [],
      "value": "kvTest"
    },
    "subscriptionId": {
      "decorators": [],
      "value": "gsfgsdfgsd"
    },
    "kvResourceGroup": {
      "decorators": [],
      "value": "rgTest"
    },
    "sqlServerName": {
      "decorators": [],
      "value": "sqlServer"
    },
    "adminLogin": {
      "decorators": [],
      "value": "admin"
    }
  },
  "resources": {
    "kv": {
      "decorators": [],
      "type": "Microsoft.KeyVault/vaults",
      "api_version": "2019-09-01",
      "existing": true,
      "config": {
        "name": "kvName",
        "scope": {
          "function": {
            "type": "resource_group",
            "parameters": {
              "resource_group_name": "kvResourceGroup",
              "subscription_id": "subscriptionId"
            }
          }
        }
      }
    }
  },
  "modules": {
    "sql": {
      "decorators": [],
      "type": "local",
      "detail": {
        "full": "./sql.bicep",
        "path": "./sql.bicep"
      },
      "config": {
        "name": "deploySQL",
        "params": {
          "sqlServerName": "sqlServerName",
          "adminLogin": "adminLogin",
          "adminPassword": {
            "operator": {
              "type": "function_accessor",
              "operands": {
                "operand_1": "kv",
                "operand_2": "vmAdminPassword"
              }
            }
          }
        }
      }
    }
  }
}

